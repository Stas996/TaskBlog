@model TaskBlog.PresentationLayer.ViewModels.ArticleViewModel

@{
    ViewBag.Title = Model.Name;
}

<h2>@Model.Name</h2>
<p>
    Автор: 
    @Html.ActionLink(Model.User.FullName, "Show", "UserProfile", new { userId = Model.User.Id})
</p>
<hr/>
    <span>Категории: </span>
    <div class="ms-tags-panel">
        @foreach (var t in Model.Tags)
        {
            <span class="label label-success">@Html.ActionLink(t.Name, "SearchByTag", new { tagId = t.Id })</span>
        }
    </div>
<hr/>
<div>
    @Model.Description
</div>

<hr />
<h3 class="text-center">Комментарии</h3>
<hr />
<div class="comments-area">
    @CommentHelpers.CommentsList(Model.Comments)
    <h4>Оставить комментарий</h4>
    @Html.Partial("~/Views/Comment/_Form.cshtml", new TaskBlog.PresentationLayer.ViewModels.CommentViewModel() { ParentPostId = Model.Id })
</div>

@section scripts{
    <script>
        $('.ms-add-comment').on('click', function (e) {
            var container = $(this).parents('div.comment');
            var formPlace = container.find("form-place");
            var parentId = container.attr('id');
            $.ajax({
                type: "GET",
                url: "@Url.Action("Create", "Comment", null)",
                data: {parentId: parentId},
                success: function (data) {
                    container.find(".form-place:first").html(data);
                }
            });
        });
    </script>
}